#  Mapper
- ì—”í‹°í‹°, request, response, ì½”ë©˜ë“œ, result, info ë“± ë³´í†µ 5ê°œ ì •ë„ ë¨
    - mapper ì´ìš©í•˜ëŠ”ê²Œ í¸í•¨

### íŠ¹ì§•
- ì»´íŒŒì¼ ì‹œì ì— ì½”ë“œë¥¼ ìƒì„±í•˜ì—¬ ëŸ°íƒ€ì„ì—ì„œ ì•ˆì •ì„±ì„ ë³´ì¥
- ë‹¤ë¥¸ ë§¤í•‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë³´ë‹¤ ì†ë„ê°€ ë¹ ë¦„
- ì–´ë…¸í…Œì´ì…˜ processorë¥¼ ì´ìš©í•´ ê°ì²´ ê°„ ë§¤í•‘ì„ ìë™ìœ¼ë¡œ ì œê³µ
- ë‹¤ë§Œ, ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë³´ë‹¤ ì˜ì¡´ì„± ì¶”ê°€ê°€ ë¨¼ì €ë˜ì–´ì•¼ í•¨
    - mapstructëŠ” ë¡¬ë³µì˜ ê²Œí„°, ì„¸í„°, ë¹Œë”ë¥¼ ì´ìš©í•˜ì—¬ ìƒì„±ë¨
    - ë”°ë¼ì„œ, ë¡¬ë³µë³´ë‹¤ ë¨¼ì € ì˜ì¡´ì„±ì´ ì„ ì–¸ëœ ê²½ìš° ì‹¤í–‰í•  ìˆ˜ ì—†ìŒ
### ì£¼ì˜ì 
- ìë™ìœ¼ë¡œ ë³€í™˜ì„ í•´ì£¼ê¸° ë•Œë¬¸ì— ê·œì•½ëŒ€ë¡œ ì•ˆí•˜ë©´ ì˜ëª» ìƒì„±ë¨
- ë§¤í¼ë¥¼ ìˆ˜ì •í•˜ë©´ ì¬ë¹Œë“œ í•´ì£¼ì–´ì•¼!
- ë³€í™˜ë˜ëŠ” í•„ë“œëª…ë“¤ì€ ê°ê° ë™ì¼í•˜ê²Œ ì„¤ì •í•´ì•¼

## ì‚¬ìš©ë²•
## 1. mapstruct ì˜ì¡´ì„± ì¶”ê°€
```
//lombok
annotationProcessor 'org.projectlombok:lombok-mapstruct-binding:0.2.0' // v1.18.16+ ë¶€í„°

// mapstruct
implementation 'org.mapstruct:mapstruct:1.4.2.Final'
annotationProcessor 'org.mapstruct:mapstruct-processor:1.4.2.Final'
```
## 2.  mapper ì¸í„°í˜ì´ìŠ¤ ìƒì„±
- ë©”ì†Œë“œëª…ì€ ììœ ë¡­ê²Œ 
- @Mapper(componentModel = "spring") ì–´ë…¸í…Œì´ì…˜ í•œì¤„ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë  ë•Œ beanìœ¼ë¡œ ë“±ë¡
```java
@Mapper(componentModel = "spring")
public interface StudentMapper {

     Student toStudent2(StudentForm studentForm);

     StudentResponse toStudentResponse2(Student student);

     Address toAddress2(StudentForm.StudentAddressForm addressForm);

     StudentResponse.StudentAddressResponse toStudentAddressResponse1(Address address);
}
```
## 3. buildí•˜ê¸°
- êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ì¤Œ
- ìˆ˜ì •í•˜ê²Œë˜ë©´ ì¬ë¹Œë“œí•´ì£¼ì–´ì•¼!

## 4. DTO mapperë¥¼ ì ìš© 
1. @builder, @Getter ì„ ì–¸
2. í•„ë“œê°’ í†µì¼í•´ì•¼ mapperê°€ ì¸ì‹ê°€ëŠ¥
3. embededíƒ€ì…ì„ ì‚¬ìš©í–ˆë‹¤ë©´
    - DTOì— Builderí´ë˜ìŠ¤ ìƒì„±
    - static í´ë˜ìŠ¤ë¡œ ì„ ì–¸í•´ì•¼
4. ë§¤í•‘ ê·œì¹™ì„ ì§ì ‘ ì§€ì •í•´ì•¼í•˜ëŠ” ê²½ìš°
    - ì‚¬ìš©ìƒí™©
        íƒ€ê²Ÿ í•„ë“œì™€ ì†ŒìŠ¤ í•„ë“œë¥¼ ë™ì¼í•˜ê²Œ ë§ì¶”ê¸° ì–´ë ¤ìš´ê²½ìš° ì‚¬ìš©
    - ì‚¬ìš©ë²•
        - ë§¤í¼ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œì— @Mapping ì ìš©
        - @Mapping(target = "address1", source = "city")
            - cityë¡œ ë“¤ì–´ì˜¨ í•„ë“œë¥¼ address1ìœ¼ë¡œ ë§¤í•‘í•´ì¤€ë‹¤
        - ```ì˜ˆì‹œ : íƒ€ê²Ÿ í•„ë“œì™€ ì†ŒìŠ¤ í•„ë“œë¥¼ ë™ì¼í•˜ê²Œ ë§ì¶”ê¸° ì–´ë ¤ìš´ê²½ìš°```
### ì˜ˆì‹œ : Address > StudentAddressResponse
```java
public class Address {
    private String city;
    private String street;
    private String zipcode;
}
```
```java
public class StudentResponse {

    private Long id;
    private String studentName;
    private StudentAddressResponse address;

    @Data
    @Builder
    @AllArgsConstructor
    @NoArgsConstructor
    public static class StudentAddressResponse {
        //ì´ëŸ¬ë©´ mapperê°€ ì •ìƒì ìœ¼ë¡œ ë§¤í•‘ë˜ì§€ ì•ŠëŠ”ë‹¤!
        //ê°ê° city, street, zipcodeë¡œ ì„¤ì •í•´ì£¼ì–´ì•¼!
        private String address1;
        private String address2;
        private String address3;
    }

}
```
### ì˜ˆì‹œ : íƒ€ê²Ÿ í•„ë“œì™€ ì†ŒìŠ¤ í•„ë“œë¥¼ ë™ì¼í•˜ê²Œ ë§ì¶”ê¸° ì–´ë ¤ìš´ê²½ìš°
```java
@Mapper(componentModel = "spring")
public interface StudentMapper {

    Student toStudent(StudentForm studentForm);

    StudentResponse toStudentResponse(Student student);

    Address toAddress(StudentForm.StudentAddressForm addressForm);

    @Mapping(target = "address1", source = "city")
    @Mapping(target = "address2", source = "street")
    @Mapping(target = "address3", source = "zipcode")
    StudentResponse.StudentAddressResponse toStudentAddressResponse(Address address);
}
```
## ê·¸ì™¸
- @Mappingë‚´ ì£¼ìš” ë©”ì†Œë“œ
    - ignore, target, source

## ì£¼ì˜ì 
- ì„ë² ë””ë“œ íƒ€ì… 
    - ì„ë² ë””ë“œ íƒ€ì…ì€ DTOí´ë˜ìŠ¤ì—ì„œ static classë¡œ ì„ ì–¸í•´ì•¼ ğŸŸ¨
- í•„ë“œëª… (builder & setter)ì´ ê°™ì•„ì•¼í•œë‹¤. ğŸ§©
    - í•„ë“œëª…ì„ ë³€ê²½í•˜ì§€ ëª»í•˜ë©´, ë§¤í•‘ê·œì¹™ì„ ë§¤í¼ì—ê²Œ ì•Œë ¤ì¤€ë‹¤.
    ```
    StudentAddressRequest address;
    private String city;
    private String street;
    private String zipcode;
    ```
```java
@Data
@AllArgsConstructor
@NoArgsConstructor
public class StudentRequest {

    @NotNull(message = "ì´ë¦„ì€ í•„ìˆ˜ê°’ì…ë‹ˆë‹¤")
    private String studentName;

    //Student í´ë˜ìŠ¤ì—ëŠ” ë§¤í•‘ë˜ëŠ” í•„ë“œëª…ì´ ì•„ë˜ì™€ ê°™ìŒ
    //private Address address;
    private StudentAddressRequest ğŸ§©address; 

    @Data
    @Builder
    @AllArgsConstructor
    @NoArgsConstructor
    public static class StudentAddressFrom{
        //Address í´ë˜ìŠ¤ì—ëŠ” ë§¤í•‘ë˜ëŠ” í•„ë“œëª…ì´ ì•„ë˜ì™€ ê°™ìŒ
        //private String city;
        //private String street;
        private String ğŸ§©city;
        private String ğŸ§©street;
        private String ğŸ§©zipcode;
    }
}
```

## 5. ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš© ğŸŸ¨

### StudentRequest, Student, StudentResponse ë³€í™˜
1. StudentRequest > Studentë¡œ ë³€í™˜
2. Student > StudentResponseë¡œ ë³€í™˜
- ì™œ return newë¥¼ ì•ˆí•´ë„ë˜ì§€? ğŸŸ¨

```java
StudentService.java>>

public class StudentService {

    @Transactional
    public StudentResponse createStudent(StudentRequest request) {

        Student student = studentMapper.toStudent(request);
        studentRepository.save(student);
        //return new StudentResponse(student);
        return studentMapper.toStudentResponse(student);
    }
}
```

### GradeRequest, Grade, GradeResponse ë³€í™˜ 1 ğŸ§©

#### @Delegate ğŸ§©
- Challenge > memberName, pw, city ìœ¼ë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•œ ì´ìœ 
- ë””ë¯¸í„°ë¥¼ í•´ê²° í•  ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜
- í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ì˜ í¼ë¸”ë¦­ ë©”ì†Œë“œë¥¼, í•„ë“œì— ì„ ì–¸ëœ ìœ„ì¹˜ì— ë§Œë“¤ì–´ì¤Œ

```
public class ChallengeMember {

    private Long id;

    @ManyToOne
    @Delegate
    private Challenge challenge;

    @ManyToOne
    @Delegate
    private Member member;

    private String interest;

}
```
```
public class ChallengeMemberResponse {

    private Long id;
    private String memberName;
    private String pw;
    private String city;
    private String challengeName;
    private String interest;

}
```
#### Getterë©”ì†Œë“œëŠ” í•„ë“œë¥¼ ìƒì„±í•´ì¤Œ ğŸ§©
- Getter ë©”ì†Œë“œë¥¼ í†µí•´ ì•„ë˜ í•„ë“œë¥¼ ìˆëŠ” ê²ƒì²˜ëŸ¼ ì¸ì‹

```java
public String getItemName(){}

private String itemName;
```

### Grade, GradeResponse ë³€í™˜ 2 ğŸ§©
- mapstructë¥¼ í†µí•´ Grade > GradeResponseë¡œ ë³€í™˜ ì‹œ 
1. public í•„ë“œë¥¼ ë³€í™˜í•˜ê¸° 
    - ë³€í™˜ê°€ëŠ¥
2. private í•„ë“œë¥¼ ë³€í™˜í•˜ê¸°
    - ë³€í™˜ë¶ˆê°€
3. @Setterë¥¼ ì´ìš©í•´ ë³€í™˜í•˜ê¸°
    - ê°€ëŠ¥í•˜ë‚˜ ì§€ì–‘í•˜ëŠ” ë°©ì‹
4. @Builderë¥¼ ì´ìš©í•´ ë³€í™˜í•˜ê¸°
    - ê°€ëŠ¥í•˜ê³  ì¢‹ì€ ë°©ì‹

```java
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class ChallengeMemberResponse {

    private Long id;
    private String memberName;
    private String pw;
    private String city;
    private String challengeName;
    private String interest;

    @AllArgsConstructor
    @NoArgsConstructor
    public static class FieldForPublic {
        public Long id;
    }

    @AllArgsConstructor
    @NoArgsConstructor
    public static class FieldForPrivate {
        private Long id;
    }

    @Setter
    @AllArgsConstructor
    @NoArgsConstructor
    public static class FieldForSetter {
        private Long id;
    }

    @Builder
    @AllArgsConstructor
    @NoArgsConstructor
    public static class FieldForBuilder {
        private Long id;
    }
}
```
```java
@Mapper(componentModel = "spring")
public interface ChallengeMemberMapper {

    ChallengeMemberResponse.FieldForPublic toChallengeMemberResponse1(ChallengeMember challengeMember);
    ChallengeMemberResponse.FieldForPrivate toChallengeMemberResponse2(ChallengeMember challengeMember);
    ChallengeMemberResponse.FieldForSetter toChallengeMemberResponse3(ChallengeMember challengeMember);
    ChallengeMemberResponse.FieldForBuilder toChallengeMemberResponse4(ChallengeMember challengeMember);
}
```