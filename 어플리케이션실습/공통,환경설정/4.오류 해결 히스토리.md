# 2️⃣ 문제를 해결하는 과정

## Controller 어노테이션 관련
- @RequestBody 없으면 json으로 받아지지 않음
```
@ResponseBody
@PostMapping("/student1")
public ResponseEntity<StudentResponse> insertStudent1(StudentRequest request) {
    StudentResponse response = testService.createStudent(request);

    return ResponseEntity.ok(response);
}
```
- @ResponseBody 없으면 exception발생
```
@PostMapping("/student2")
public StudentResponse insertStudent2(@RequestBody StudentRequest request) {
    StudentResponse response = testService.createStudent(request);

    return response;
}
```

## 2-1. 찾으려는 객체에 유니크한 컬럼이 없으면 객체 조회시 문제가 된다
- 과목을 같은 값으로 중복생성하면 grade 객체 조회시 오류 발생
    ```
    과목 생성
        {id:1, "ENG"}
        {id:2, "ENG"} 

    grade 생성로직

        //과목 조회 : subject는 기존에 있는 것인지 확인
        subjectRepository.findBySubjectType(gradeForm.getSubjectType())

        >> "ENG"가 2개라 오류발생
    }
    ```
    - 해결방안
        1. limit으로 1개만 검색되도록 한다
            - 과부하가 걸릴 수 있음
        2. 중복생성이 되지 않도록 막는다
            ```
            @Column(unique = true)
            private SubjectType subjectType
            ```
## 2-2. request폼이 상황에 따라 달라야 하는 경우
- payload가 다른 경우
    - 페이로드 : request할 때 요청하는 데이터
        > 페이로드

        >페이로드(payload)라는 단어는 운송업에서 비롯하였는데, 지급(pay)해야 하는 적화물(load)을 의미합니다. 예를 들어, 유조선 트럭이 20톤의 기름을 운반한다면 트럭의 총 무게는 차체, 운전자 등의 무게 때문에 그것보다 더 될 것이다. 이 모든 무게를 운송하는데 비용이 들지만, 고객은 오직 기름의 무게만을 지급(pay)하게 된다. 그래서 ‘pay-load’란 말이 나온 것이다
- grade를 등록할 때와 수정할 때 보여야 하는 값이 다름
    ```
    1. grade 등록

        private String studentName;
        private String subjectName;
        private Integer score;


    2. grade 수정

        private Integer score;
    ```
    - 해결방안
        1. 클래스를 별도로 관리
            - 단점 : 관리할 클래스가 늘어남
            - 주의 : 새로운 클래스가 생기면 기존 코드가 바뀔 수 있음
                - 기존 : GradeForm
                - 신규 : UpdateGradeForm
                    - GradeForm > CreateGradeForm 으로 바뀌어야
            - 장점 : 클래스가 분리되어 비즈니스 관계를 논리적으로 끊을 수 있음. 
                - 다른 클래스가 변경이 된다고 영향을 받지 않는다. 
        2. innerClass
            - 주의 : static으로 해야(자바 문법)
            - 껍데기 클래스를 만들고 그 안에 각각의 클래스를 만들어 관리