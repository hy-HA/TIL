### 의존성 추가
```
implementation 'org.springframework.data:spring-data-envers'
```

### application.yml
- spring - jpa - 속성 추가
```
spring:
  jpa:
    properties:
      org.hibernate.envers:
        audit_table_suffix: _log
```

### @EnableAspectJAutoProxy 추가
- @SpringBootApplication이 있는 클래스에 @EnableAspectJAutoProxy 추가

### RequestLoggingAspect클래스 추가
```
@Slf4j
@Aspect
@Component
public class RequestLoggingAspect {

    @Around(value = "restController() && getMapping()")
    public Object endpoint(ProceedingJoinPoint joinPoint) {
        MethodSignature signature = (MethodSignature) joinPoint.getSignature();
        Method method = signature.getMethod();

        Operation operation = method.getAnnotation(Operation.class);
        GetMapping getMapping = method.getAnnotation(GetMapping.class);

        Object result;
        try {
            log.error(operation.summary());
            log.error(Arrays.toString(getMapping.value()));
            result = joinPoint.proceed();
        } catch (Throwable e) {
            throw new RuntimeException(e);
        }

        return result;
    }

    @Pointcut("@annotation(org.springframework.web.bind.annotation.GetMapping)")
    protected void getMapping() {
    }

    @Pointcut("@within(org.springframework.web.bind.annotation.RestController)")
    protected void restController() {
    }

}
```

### AuditRevision 생성
```
@NoArgsConstructor
@Getter
@Entity
@RevisionEntity
@Table(name = "revision")
public class AuditRevision {

    @RevisionNumber
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "rev")
    private Long id;

    @RevisionTimestamp
    @Column(name = "revstamp")
    private Long timestamp;


    /**
     *
     */
    @Column(name = "admin_id")
    private Long adminId = 0L;

}
```

### 수정내역 기록할 클래스_Student,Grade,Subject
- 어노테이션 추가
    - @Audited(targetAuditMode = NOT_AUDITED)
    - @AuditOverride(forClass = BaseEntity.class)
- 추적하지 않을 필드
    - @NotAudited 추가
```
@Getter
@NoArgsConstructor
@Entity
@Audited(targetAuditMode = NOT_AUDITED)
@AuditOverride(forClass = BaseEntity.class)
@Table(name="student")
@Where(clause = "is_deleted = false")
@SQLDelete(sql = "update student set is_deleted = true where student_id = ?")
public class Student extends BaseEntity {
    ...

    @NotAudited
    @Column(unique = true)
    private String residentNumber;

}
```