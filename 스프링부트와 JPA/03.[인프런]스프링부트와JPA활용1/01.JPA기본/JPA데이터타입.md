# JPA 데이터 타입

## JPA 데이터 타입의 종류
### 1. 엔티티 타입
- @Entity로 정의하는 객체
- 데이터가 변해도 식별자로 지속해서 **추적 가능**
- ex. 회원 엔티티의 키나 나이 값을 변경해도 식별자로 인식 가능

### 2. 값 타입
- int, Integer, String처럼 단순히 값으로 사용하는 자바 기본타입이나 객체
- 식별자가 없고 값만 있으므로 변경 시 **추적 불가**
- ex. 숫자 100을 200으로 변경하면 완전히 다른 값으로 대체

## 값 타입의 종류
### 1. 기본값 타입
- 자바가 기본적으로 제공하는 값을 세팅해서 사용할 수 있음
1. 자바 기본타입 : int, double
2. 래퍼 클래스 : Integer, Long
3. String
#### 특징
- 생명 주기를 엔티티에 의존
    - 회원을 삭제하면 이름, 나이 필드도 함께 삭제
- 값 타입은 공유하면 안됨
    - 회원 이름 변경 시 다른 회원의이름도 함께 변경되면 안됨
- 참고
    - 자바의 기본타입은 공유되지 않음. 따라서 값 타입으로 쓰기 안전함
    - Integer 같은 래퍼 클래스나 String 같은 특수한 클래스는 공유 가능한 객체이지만 변경할 수 있는 방법이 없음. 
```java
String name;
int age;
```
### 2. 임베디드 타입
- 새로운 값 타입을 직접 정의할 수 있음
- JPA에서는 임베디드 타입이라 함
- 주로 기본 값 타입을 모아서 만듦(복합 값 타입이라고 함)
```java
Period.java>>

startDate : Date
endDate : Date

---
Address.java>>

city : String
street : String
zipcode : String
```

#### 사용법
- @Embeddable : 값 타입을 정의하는 곳에 표시
- @Embedded : 값 타입을 사용하는 곳에 표시
- 기본 생성자 필수
> 참고. request, 엔티티 객체, response 타입 변경은 `어플리케이션` 참고
#### 장점
- 재사용이 가능
- 높은 응집도
- Period.isWork() 처럼 해당 값 타입만 사용하는 의미있는 메소드를 만들 수 있음
- 임베디드 타입을 포함한 모든 값 타입은, 값 타입을 소유한 엔티티에 생명주기를 의존. 

#### 임베디드 타입과 테이블 매핑
- 임베디드 타입은 엔티티의 값일 뿐
- 임베디드 타입을 사용하기 전과 후에 **매핑하는 테이블은 같다**
- 객체와 테이블은 아주 세밀하게 매핑하는 것이 가능
- 잘 설계한 ORM 애플리케이션은 매핑한 테이블의 수보다 클래스의 수가 더 많음

#### @AttributeOverride : 속성 재정의
- 한 엔티티에서 같은 값 타입을 사용할 때 사용
- 원래는 컬럼명이 중복되어 컴파일 오류남
- @AttributeOverrides @AttributeOverride를 사용해서 컬럼명 속성을 재정의
```java
private Address homeAddress;
private Address workAddress;
>> 오류남!
```

#### 임베디드 타입과 null
- 임베디드 타입의 값이 null 이면 매핑한 컬럼값은 모두 null

### 3. 컬렉션 값 타입