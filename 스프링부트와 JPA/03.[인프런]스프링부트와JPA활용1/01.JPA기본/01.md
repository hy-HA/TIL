참고] 김영한

# JPA
- 데이터베이스와 객체지향프로그램의 패러다임의 불일치를 해결해줌

<details>
<summary><b> ✅ 추가설명</b></summary>
<div markdown="1">
# Java Persistence API
1. 자바 진영의 ORM 기술 표준
    - 어플리케이션 객체를 RDB 테이블에 자동으로 영속화 해주는 것
2. 인터페이스의 모음
    - JPA2.1 표준 명세를 구현한 3가지 구현체
        - 하이버네이트, EclipseLink, DataNucleus
3. JPA는 어플리케이션과 JDBC 사이에서 동작
    - JAVA 어플리케이션 - JPA - JDBC API - DB
</div>
</details>

# JPA와 CRUD
- 자바컬렉션에 저장하고, 조회하듯이 사용가능
    1. 저장 : jpa.persist(member)
        - persist : 영구저장하다
    2. 조회 : Member member = jpa.find(memberId)
    3. 수정 : member.setName("변경할 이름")
    4. 삭제 : jpa.remove(member)

# JPA 구동방식
1. persistence 클래스로 시작
    1. 설정정보 조회(read)
        - META-INF/persistence.xml
    2. EntityManagerFactory 생성
        1. emf에서 필요시마다 EntitManager를 생성함
            ```
            EntityManagerFactory emf = Persistence.createEntityManagerFactory("persistenceUnitName");
            ```
        - => 이순간부터 DB와 연결이 됨.
        2. EntityManager 꺼내오기
            ```
            EntityManager em = emf.createEntityManager;
            ```
        - => CRUD 가능
        3. 트랜잭션
        - jpa에서 데이터를 변경하는 모든 작업은 트랜잭션 안에서 작업해야함
            1. 트랜잭션 생성 및 시작
                ```
                EntityTransaction tx = em.getTransaction();
                tx.begin //트랜잭션 시작
                
                => 데이터베이스 트랜잭션 시작
                ```
            2. 트랜잭션 커밋
                ```
                /* 객체 생성 + 값 입력 + persist
                Member member = new Member();
                member.setId(1L);
                member.setName("hee");

                em.persist(member);
                */

                tx.commit //트랜잭션 커밋
                ```
        4. EntityManager 종료
            ```entityManager.close()```
        5. EntityManagerFactory 종료
            ```emf.close()```
```
//(1)EntityManagerFactory 생성
EntityManagerFactory emf = Persistence.createEntityManagerFactory("persistenceUnitName");

//(2)EntityManager 꺼내오기
EntityManager em = emf.createEntityManager;

//(3)트랜잭션 생성 및 시작
EntityTransaction tx = em.getTransaction();
tx.begin

    //try catch문 : exception 생길 때 에러 잡아주기
try { 
    //(4)객체 생성 + 값 입력 + persist
    Member member = new Member();
    member.setId(1L);
    member.setName("hee");

    em.persist(member);

    //(5)트랜잭션 커밋
    tx.commit

} catch(Exception e) {

    tx.rollback();

} finally {

    em.close(); //em사용완료시 닫아줘야함(em이 DB커넥션을 물고 동작하기 때문)  

}
emf.close(); //전체 애플리케이션이 끝나면 emf도 닫아주기

}
```
# 객체와 테이블 생성하고 매핑하기
- @Entity 
    - JPA가 관리할 객체
- @ID
    - 데이터베이스 PK와 매핑