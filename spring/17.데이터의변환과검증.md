## 1. WebDataBinder
- year=2021&month=10&day=1 로 요청이 오면
- name,value 맵 형태로 변환
    - String 타입
- WebDataBider를 통해 컨트롤러의 매개변수 객체에 바인딩함. 
    - MyDate 객체의 year,mont,day에 각 value가 바인딩 됨. 
        - int 타입
    - 1. 타입변환 
        - 결과(+에러가 있으면 에러도) BindingResult에 저장됨. 
        - 우선순위
            - 커스텀 propertyEditor
            - Conversion Service
            - 디폴트 propertyEditor
    - 2. 데이터 검증
        - month는 1~12까지 있음. 타입변환된 month가 1~12의 범위에 있는지 확인. 

## 2. RegisterController에 변환기능 추가하기 - 실습
- 1. @InitBinder 붙은 메서드를 컨트롤러 안에 작성해서 날짜변환형식을 지정. 
```
@InitBinder
public void toDate(WebDataBinder binder) {
    SimpleDateFormat df = new SimpleDateFormat("yyyy/MM/dd");
    //스프링이 제공하는 CustomDateEditor를 이용해서 변환. String -> Date
    binder.registerCustomerEditor(Date.class, new CustomDateEditor(df,false));
}
```
- 2. 필드에 직접 @붙여서 날짜형식 지정
```
public class User {
    private String id;
    private String pwd;
    private String name;
    @DateTimeFormat(pattern="yyyy/MM/dd")
    private Date birth;
}
```

## 3. propertyEditor

- 양방향 타입 변환(String -> 타입, 타입 -> String)
- 특정 타입이나 이름의 필드에 적용 가능
    - hobby 필드에만 PropertyEdutor가 적용되는 경우.
    ```
    binder.registerCustomEditor(String[].class, "hobby", new StringArrayPropertyEditor("#"));
    ```
- 디폴트 PropertyEditor : 스프링이 기본적으로 제공
- 커스텀 PropertyEditor : 사용자가 직접 구현. PropertyEditorSupport를 상속하면 편리

- 모든 컨트롤러 내에서의 변환 - WebBindingInitializer를 구현 후 등록
- 특정 컨트롤러 내에서의 변환 - 컨트롤러 @InitBinder가 붙은 메서드를 작성
```
@InitBinder
public void toDate(WebDataBinder binder) {
    SimpleDateFormat df = new SimpleDateFormat("yyyy/MM/dd");
    //스프링이 제공하는 CustomDateEditor를 이용해서 변환. String -> Date
    binder.registerCustomerEditor(Date.class, new CustomDateEditor(df,false));
}
```

## 4. Converter와 ConversionService
- Converter 
    - 단방향 타입 변환(타입A -> 타입B)
    - PropertyEditor의 단점을 개선(stateful -> stateless) 
        - property = 인스턴스 변수
        - java beans(자바 객체)라는 기술에서 온 것
        - 인스턴스 변수를 바꿀 때 쓰는 것이 PropertyEditor
        - stateful : 인스턴스 변수를 쓰는 것. 
        - stateless : 인스턴스 변수를 쓰지 않음. 

- ConversionService
    - 타입 변환 서비스를 제공. 여러 Converter를 등록 가능
    - WebDataBinder에 DefaultFormattingConversionService이 기본 등록
    - 모든 컨트롤러 내에서의 변환 : ConfigurableWebBindingInitializer를 설정해서 사용
    - 특정 컨트롤러 내에서의 변환 : 컨트롤러에 @InitBinder가 붙은 메서드를 작성

## 5. Formatter
- 양방향 타입 변환(String -> 타입, 타입 -> String)
- 바인딩할 필드에 적용 - @NumberFormat, @DataTimeFormat
    - NumberFormat : 숫자타입을 변환
    - DataTimeFormat : 문자타입을 변환
    ```
    @DataTimeFormat(pattern="yyyy/MM/dd")
    Date birth;

    @NumberFormat(pattern="###,###")
    BigDecimal salary;
    ```