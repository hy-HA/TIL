# 계층구조별_필수개념

# 도메인

<details>
<summary><b> 도메인 </b></summary>
<div markdown="1">

## 1. Setter는 사용하지 말 것
[참고](https://velog.io/@backfox/setter-%EC%93%B0%EC%A7%80-%EB%A7%90%EB%9D%BC%EA%B3%A0%EB%A7%8C-%ED%95%98%EA%B3%A0-%EA%B0%80%EB%B2%84%EB%A6%AC%EB%A9%B4-%EC%96%B4%EB%96%A1%ED%95%B4%EC%9A%94)

1. 도메인 로직의 분산되는 것을 막기 위해
2. 객체 필드값을 수정하는 목적에 맞게 메서드를 정의하기 위해

## 참고 - of
```
public static Test of(Student student, Subject subject){
    Test test = new Test();
    test.subject = subject;
    test.student = student;
    return test;
}
```

## 2. 롬복

- @Entity 
    - 해당 클래스를 DB테이블과 매핑
- @Table(name="student") 
    - 엔티티와 매핑할 테이블을 지정
- @NoArgsConstructor 
    - 파라미터가 없는 기본 생성자 생성
- @Id @GeneratedValue 
    - 기본키를 DB가 생성해주는 값으로 사용
    
- @Column(name = "student_id")
    - 객체 필드를 테이블 컬럼과 매핑(name: 필드외 매핑할 테이블 컬럼명 지정)
- @OneToMany(mappedBy = "student", cascade = CascadeType.ALL) 
    - 해당필드(test) 테이블에 있는 student필드에 의해 매핑됨.(변경x, 읽기전용)
    
- @Builder
    - 객체를 정의하고 그 객체를 생성하는 방법
    - 장점
        1. 생성자 파라미터가 많을 때 가독성이 좋음
        2. 어떤 값을 먼저 설정하던 상관이 없다
    - 사용법
        1. 빌더 패턴을 적용할 객체에 @Builder 어노테이션 선언
        2. 빌더를 통해 객체 생성

# 참고 - 의존성 주입의 3가지 방법
- 등록된 빈을 사용하기 위한 스프링 프레임워크의 3가지 DI방법

### 생성자 주입
> 추천하는 이유
1. 순환참조를 방지할 수 있음 - 순환 참조가 발생하는 경우 애플리케이션이 구동되지 않음
2. 테스트 코드 작성 용이 - 단순 POJO를 이용한 테스트 코드 만들 수 있음
3. 코드 속 나쁜 내새를 없앤다? - 조금 더 품질좋은 코드 작성 가능
4. immutable하다 - 실행중에 객체가 변하는 것을 막을 수 있음 & 오류를 사전에 방지가능
```
// 단일 생성자인 경우는 추가적인 어노테이션이 필요 없다.
public MadExample(HelloService helloService) {
    this.helloService = helloService;
}
```
### 필드 주입
```
@Autowired private HelloService helloService;
```
### 수정자 주입
```
@Autowired
public void setHelloService(HelloService helloService) {
    this.helloService = helloService;
}
```

</details>


# 리포지토리

<details>
<summary><b> 리포지토리 </b></summary>


## JpaRepository 상속받기
- JPA리포지토리를 사용하면 옵셔널로 받아옴. 
- 반환값이 옵셔널. 옵셔널을 하나의 컬렉션이라 생각하면됨. 

## 익셉션
### 1.런타임 익셉션
- 해당 익셉션이 발생하는 경우
    - 배열에 index값 넘어설때
    - 널 발생
- => 익셉션이 발생하면 롤백마크가 찍힘 > 상위에까지 전달됨.

### 2.일반 익셉션
- 에러잡을때 try catch로 잡아야

## 커스텀 익셉션

</details>


# 서비스


<details>
<summary><b> 서비스 </b></summary>

## 필드주입보다는 생성자 주입
```
@Autowired StudentRepository studentRepository; 보다는
private final StudentRepository studentRepository; 으로
```
</details>



# 컨트롤러

<details>
<summary><b> 컨트롤러 </b></summary>

## RestController vs controller
- responsebody : 바디에 데이터를 바로 전달 가능. 

## ResponseEntity
- 자동으로 객체를 넣었을때 state코드 응답값을 통일된 형태로 보내주는 

## 람다식 
- stream
</div>

<details>
<summary><b> DTO </b></summary>
< markdown="1">

# DTO
- 화면페이지에서 요구사항이 계속 바뀌니 도메인에서 필요한 부분만 받아오기위해

## @Data
 
@data 뭔지 확인


</details>
