# ê³¼ëª© ìƒì„±

# ì„œë¹„ìŠ¤
1. Requestê°ì²´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ(SubjectForm)
2. Requestê°ì²´ ì˜ˆì™¸ì²˜ë¦¬ í•´ì£¼ê³  `â›‘(validation)`
3. ê³¼ëª©ê°ì²´ë¥¼ ë§Œë“¤ì–´ì£¼ê³ (Subject)
    - builder ì‚¬ìš©
    - ì´ë•Œ idëŠ” ìë™ ìƒì„±ë¨(@Id, @GeneratedValue)
4. ë¦¬í¬ì§€í† ë¦¬ì— ì €ì¥í•˜ê³ (ì €ì¥íƒ€ì…ì€ Student)
    - ë¦¬í¬ì§€í† ë¦¬ëŠ” ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê³  ìˆìœ¼ë¯€ë¡œ 
    - ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì„ ì–¸í•œ íƒ€ì…ìœ¼ë¡œ ì „ë‹¬í•´ì£¼ì–´ì•¼í•¨
5. responseê°ì²´ë¡œ ë³€í™˜í•´ì„œ ì „ë‹¬(StudentResponse)
```java
@Transactional
public SubjectResponse createSubject(SubjectForm request) {
    
    Subject subject = Subject.builder()
            .subject(request.getSubject())
            .build();
    subjectRepository.save(subject);

    return new SubjectResponse(subject);
}
```

# ë„ë©”ì¸
- Builder ìƒì„±ì
    - String íƒ€ì…ì„ ë°›ì•„ì„œ Subject íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” ìƒì„±ì
    - ```this.subjectType = SubjectType.valueOf(subject);```
        - request(string íƒ€ì…)ì™€ ì¼ì¹˜í•˜ëŠ” eunmê°’ ì°¾ì•„ì£¼ëŠ” ë©”ì†Œë“œ
### enum íƒ€ì… ì‚¬ìš© ì‹œ í•„ìš”í•œ ì„¤ì •ë“¤
- @Column(name = "subject_type", unique = true) â›‘
    - ê°™ì€ ê³¼ëª©ì´ ì—¬ëŸ¬ê°œ ìƒì„±ì´ ëœë‹¤ë©´, íŠ¹ì • ê³¼ëª©ì˜ í•™ìƒë“¤ì˜ ì ìˆ˜ë¥¼ ì¡°íšŒ ì‹œ ì–´ëŠ ê³¼ëª©ìœ¼ë¡œ ì¡°íšŒí•´ì•¼í•˜ëŠ”ì§€ ëª¨ë¥´ê¸°ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë‚¨
- @Enumerated(value = EnumType.STRING) ğŸ§©
    - enum íƒ€ì…ì˜ í•„ë“œ ì„ ì–¸ ì‹œ ì–´ë…¸í…Œì´ì…˜ ì„¤ì •
- getSubjectType() ğŸ§©
    - enumíƒ€ì…ì˜ í•„ë“œë¥¼ String íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ë©”ì†Œë“œ
```java
@Getter
@NoArgsConstructor
@Entity
@Table(name="subject")
@Where(clause = "is_deleted = false")
public class Subject {

    @Id @GeneratedValue
    @Column(name="subject_id")
    private Long id;

    @Enumerated(value = EnumType.STRING)
    @Column(name = "subject_type", unique = true)
    private SubjectType subjectType;

    @Builder
    public Subject(String subject){
        initSubjectType(subject);
        this.isDeleted = false;
    }

    //ì§€í–¥í•´ì•¼í•˜ëŠ” ì½”ë“œ -> ê°ì²´ ì•„ë‹Œ Stringìœ¼ë¡œ ë°˜í™˜
    public String getSubjectType() {
        return subjectType.name();
    }

    private void initSubjectType(String subject) {
        try {
            this.subjectType = SubjectType.valueOf(subject);
        } catch (IllegalArgumentException e) {

            throw TypeException.of("ê³¼ëª©", subject);
        }
    }

}

```
# enum íƒ€ì… ì„¤ì • ë° ì‚¬ìš©í•˜ê¸°
1. enum íƒ€ì… ì„¤ì •
    - KOR,ENG
2. Subject ë„ë©”ì¸ì—ì„œ enumí´ë˜ìŠ¤ ì‚¬ìš©
    - enumíƒ€ì… í•„ë“œ ì„ ì–¸
        - `@Enumerated(value = EnumType.STRING)`
        - `@Column(name = "subject_type", unique = true)`
        - `private SubjectType subjectType;`    
    - Subject ìƒì„±ì
        - valueOf()ë©”ì†Œë“œ ì‚¬ìš©ì‹œ ì˜ˆì™¸ì²˜ë¦¬ í•„ìš”
            - IllegalArgumentException ì˜ˆì™¸
        ```
        private void initSubjectType(String subject) {

            try {            
                this.subjectType = SubjectType.valueOf(subject);
            } catch (IllegalArgumentException e) {
                throw TypeException.of("ê³¼ëª©", subject);
            }
        }
        ```
    - enumíƒ€ì… > Stringìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì†Œë“œ ìƒì„±
        ```
        public String getSubjectType() {
            return subjectType.name();
        }
        ```
