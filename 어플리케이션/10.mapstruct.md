#  Mapper
- 엔티티, request, response, 코멘드, result, info 등 보통 5개 정도 됨
- mapper 이용

### 1. mapstruct 의존성 추가
```
//lombok
annotationProcessor 'org.projectlombok:lombok-mapstruct-binding:0.2.0' // v1.18.16+ 부터

// mapstruct
implementation 'org.mapstruct:mapstruct:1.4.2.Final'
annotationProcessor 'org.mapstruct:mapstruct-processor:1.4.2.Final'
```
### 2.  mapper 인터페이스 생성
- 메소드명은 자유롭게 
- @Mapper(componentModel = "spring") 어노테이션 한줄로 스프링 컨테이너가 실행될 때 bean으로 등록
```java
@Mapper(componentModel = "spring")
public interface StudentMapper {

     Student toStudent(StudentForm studentForm);

     StudentResponse toStudentResponse(Student student);

     Address toAddress(StudentForm.StudentAddressForm addressForm);

     StudentResponse.StudentAddressResponse toStudentAddressResponse(Address address);
}
```
### 3. build하기
- 구현체를 만들어줌

### 4. mapper를 적용하는 클래스 🟨
1. @builder, @Getter 선언
2. request, response클래스에 Builder클래스 생성

#### DTO 🟨
- 임베디드 타입은 static class로 선언해야 🟨
- 필드명 (builder & setter)이 같아야한다. 🧩
    - 필드명을 변경하지 못하면, 매핑규칙을 매퍼에게 알려준다.
    - 임베디드 타입 필드명은 매핑하는 필드명과 동일해야
        - StudentAddressRequest address;
        - private String city;
        - private String street;
        - private String zipcode;
```java
@Data
@AllArgsConstructor
@NoArgsConstructor
public class StudentForm {

    @NotNull(message = "이름은 필수값입니다")
    private String studentName;

    //Student 클래스에는 매핑되는 필드명이 아래와 같음
    //private Address address;
    private StudentAddressRequest 🧩address; 

    @Data
    @Builder
    @AllArgsConstructor
    @NoArgsConstructor
    public static class StudentAddressFrom{
        //Address 클래스에는 매핑되는 필드명이 아래와 같음
        //private String city;
        //private String street;
        private String 🧩city;
        private String 🧩street;
        private String 🧩zipcode;
    }
}
```

### 5. @Builder 부분 수정 🟨

#### 서비스
- 왜 return new를 안해도되지? 🟨
```java
StudentService.java>>

public class StudentService {

    private final StudentRepository studentRepository;

    private final StudentMapper studentMapper;
    @Transactional
    public StudentResponse createStudent(StudentRequest request) {
        Student student = studentMapper.toStudent(request);
        studentRepository.save(student);
        //return new StudentResponse(student);
        return studentMapper.toStudentResponse(student);
    }
}
```