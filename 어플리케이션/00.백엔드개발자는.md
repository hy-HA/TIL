# ë°±ì—”ë“œ ê°œë°œìê°€ ì£¼ë¡œ í•˜ëŠ” 3ê°€ì§€
### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì§œê¸°
### Swagger
### Test ì½”ë“œ ì§œê¸° 
- ë¹„ì¦ˆë‹ˆìŠ¤ëŠ” ë¬´ì¡°ê±´ ë³€ê²½ì´ ëœë‹¤.
- ì½”ë“œë¥¼ ìˆ˜ì •í•´ë„ ê¸°ì¡´ì˜ ë™ì‘ì´ ì œëŒ€ë¡œ ë°˜ì˜ì´ ë˜ëŠ”ì§€ í™•ì¸ í•„ìš”.
- ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê²Œ ë˜ë©´ ì—£ì§€ ì¼€ì´ìŠ¤ê°€ ë°œìƒí•˜ì—¬ ì¥ì• , ë²„ê·¸ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤. 
- ì´ëŸ° ë¶€ë¶„ì„ ë¯¸ë¦¬ íŒŒì•…í•´ì„œ ë°©ì§€í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•¨
# 0ï¸âƒ£ ë³µìŠµ ë°©ë²•
- ê°œë… ê¹ƒí—ˆë¸Œë¡œ ì •ë¦¬
- í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡­ê²Œ ë§Œë“¤ë©´ì„œ ê³µë¶€
    - swagger
    - postman
    - h2 DB

# 1ï¸âƒ£ API ì„¤ê³„ 
- í”„ëŸ°íŠ¸ê°€ ë³´ê³  ì˜ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›ì„ ì˜ í•´ì¤˜ì•¼(í‘œì¤€êµ¬í˜„ í•´ì•¼)

- ğŸŸ¨ HTTP ê¹€ì˜í•œ ê°•ì˜ ë“¤ì„ ê²ƒ


## REST API êµ¬ì„±
1. ìì›(resource) - URI
2. í–‰ìœ„(verb) - HTTP Method
3. í‘œí˜„(representations)
    ```
    [ì—”ë“œí¬ì¸íŠ¸ êµ¬ì„±]
    - ë©”ì†Œë“œì™€ URIì •ë³´ë¡œ íŒë‹¨
        
    DELETE /subject/{id}
    GET    /subject
    GET    /subject/{id}
    POST   /subject
    PATCH  /grade/{id}/score

    => í†µì¼ì„± ê°€ì ¸ì•¼
    => ì—”ë“œí¬ì¸íŠ¸ë§Œ ë³´ê³  ìœ ì¶”ê°€ ë˜ì–´ì•¼
    ```

## REST API ë””ìì¸ ê°€ì´ë“œ
1. URIëŠ” ì •ë³´ì˜ ìì›ì„ í‘œí˜„í•´ì•¼
    ```
    [ì˜ëª»ëœ ì˜ˆ (x)]

    GET /members/delete/1

    ã„´ URIëŠ” deleteì™€ ê°™ì€ í–‰ìœ„ì— ëŒ€í•œ í‘œí˜„ì´ ë“¤ì–´ê°€ë©´ ì•ˆë¨
    ```
2. ìì›ì— ëŒ€í•œ í–‰ìœ„ëŠ” HTTP Method(GET, POST, PUT, DELETE)ë¡œ í‘œí˜„
    - PUT : ëª¨ë“  ì •ë³´ ìˆ˜ì • ì‹œ 
    - PATCH: ì¼ë¶€ ì •ë³´ ìˆ˜ì • ì‹œ 
    ```
    [ì˜¬ë°”ë¥¸ ì˜ˆ (o)]

    DELETE /memebers/1

    ã„´ ìì›ì— ëŒ€í•œ í–‰ìœ„ëŠ” HTTP Methodë¡œ í‘œí˜„
    ```

# 2ï¸âƒ£ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •

## 2-1. ì°¾ìœ¼ë ¤ëŠ” ê°ì²´ì— ìœ ë‹ˆí¬í•œ ì»¬ëŸ¼ì´ ì—†ìœ¼ë©´ ê°ì²´ ì¡°íšŒì‹œ ë¬¸ì œê°€ ëœë‹¤
- ê³¼ëª©ì„ ê°™ì€ ê°’ìœ¼ë¡œ ì¤‘ë³µìƒì„±í•˜ë©´ grade ê°ì²´ ì¡°íšŒì‹œ ì˜¤ë¥˜ ë°œìƒ
    ```
    ê³¼ëª© ìƒì„±
        {id:1, "ENG"}
        {id:2, "ENG"} 

    grade ìƒì„±ë¡œì§

        //ê³¼ëª© ì¡°íšŒ : subjectëŠ” ê¸°ì¡´ì— ìˆëŠ” ê²ƒì¸ì§€ í™•ì¸
        subjectRepository.findBySubjectType(gradeForm.getSubjectType())

        >> "ENG"ê°€ 2ê°œë¼ ì˜¤ë¥˜ë°œìƒ
    }
    ```
    - í•´ê²°ë°©ì•ˆ
        1. limitìœ¼ë¡œ 1ê°œë§Œ ê²€ìƒ‰ë˜ë„ë¡ í•œë‹¤
            - ê³¼ë¶€í•˜ê°€ ê±¸ë¦´ ìˆ˜ ìˆìŒ
        2. ì¤‘ë³µìƒì„±ì´ ë˜ì§€ ì•Šë„ë¡ ë§‰ëŠ”ë‹¤
            ```
            @Column(unique = true)
            private SubjectType subjectType
            ```
## 2-2. requestí¼ì´ ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì•¼ í•˜ëŠ” ê²½ìš°
- payloadê°€ ë‹¤ë¥¸ ê²½ìš°
    - í˜ì´ë¡œë“œ : requestí•  ë•Œ ìš”ì²­í•˜ëŠ” ë°ì´í„°
        > í˜ì´ë¡œë“œ

        >í˜ì´ë¡œë“œ(payload)ë¼ëŠ” ë‹¨ì–´ëŠ” ìš´ì†¡ì—…ì—ì„œ ë¹„ë¡¯í•˜ì˜€ëŠ”ë°, ì§€ê¸‰(pay)í•´ì•¼ í•˜ëŠ” ì í™”ë¬¼(load)ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìœ ì¡°ì„  íŠ¸ëŸ­ì´ 20í†¤ì˜ ê¸°ë¦„ì„ ìš´ë°˜í•œë‹¤ë©´ íŠ¸ëŸ­ì˜ ì´ ë¬´ê²ŒëŠ” ì°¨ì²´, ìš´ì „ì ë“±ì˜ ë¬´ê²Œ ë•Œë¬¸ì— ê·¸ê²ƒë³´ë‹¤ ë” ë  ê²ƒì´ë‹¤. ì´ ëª¨ë“  ë¬´ê²Œë¥¼ ìš´ì†¡í•˜ëŠ”ë° ë¹„ìš©ì´ ë“¤ì§€ë§Œ, ê³ ê°ì€ ì˜¤ì§ ê¸°ë¦„ì˜ ë¬´ê²Œë§Œì„ ì§€ê¸‰(pay)í•˜ê²Œ ëœë‹¤. ê·¸ë˜ì„œ â€˜pay-loadâ€™ë€ ë§ì´ ë‚˜ì˜¨ ê²ƒì´ë‹¤
- gradeë¥¼ ë“±ë¡í•  ë•Œì™€ ìˆ˜ì •í•  ë•Œ ë³´ì—¬ì•¼ í•˜ëŠ” ê°’ì´ ë‹¤ë¦„
    ```
    1. grade ë“±ë¡

        private String studentName;
        private String subjectName;
        private Integer score;


    2. grade ìˆ˜ì •

        private Integer score;
    ```
    - í•´ê²°ë°©ì•ˆ
        1. í´ë˜ìŠ¤ë¥¼ ë³„ë„ë¡œ ê´€ë¦¬
            - ë‹¨ì  : ê´€ë¦¬í•  í´ë˜ìŠ¤ê°€ ëŠ˜ì–´ë‚¨
            - ì£¼ì˜ : ìƒˆë¡œìš´ í´ë˜ìŠ¤ê°€ ìƒê¸°ë©´ ê¸°ì¡´ ì½”ë“œê°€ ë°”ë€” ìˆ˜ ìˆìŒ
                - ê¸°ì¡´ : GradeForm
                - ì‹ ê·œ : UpdateGradeForm
                    - GradeForm > CreateGradeForm ìœ¼ë¡œ ë°”ë€Œì–´ì•¼
            - ì¥ì  : í´ë˜ìŠ¤ê°€ ë¶„ë¦¬ë˜ì–´ ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ê³„ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ëŠì„ ìˆ˜ ìˆìŒ. 
                - ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ë³€ê²½ì´ ëœë‹¤ê³  ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤. 
        2. innerClass
            - ì£¼ì˜ : staticìœ¼ë¡œ í•´ì•¼(ìë°” ë¬¸ë²•)
            - ê»ë°ê¸° í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— ê°ê°ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬

# 3ï¸âƒ£ ì½”ë“œ ì‘ì„± ì£¼ì²´ ì°¾ê¸°

1. ì–´ë–¤ ì—”í‹°í‹°ì˜ ì–´ë–¤ ê°’ì„ ìˆ˜ì •í• ì§€ ì •í•œë‹¤
2. ì–´ë–¤ ê°’ì„ ìˆ˜ì •í• ì§€, ì–´ë–¤ ê°’ì„ ë°›ì„ì§€ ì •í•œë‹¤
3. ë©”ì†Œë“œë¡œ ë§Œë“ ë‹¤
4. ë©”ì†Œë“œì— íŠ¸ëœì­ì…˜ì„ ë¶™ì—¬ ì €ì¥
    - 1ì°¨ìºì‹œì™€ ë°ì´í„° ê°’ì´ ë‹¤ë¥´ë©´ ì—…ë°ì´íŠ¸ ë¨(SpringJPA)
        - ì°¸ê³  
            - JPARepositoryì— updateê°€ ì—†ìŒ
            - isNew ë©”ì†Œë“œ
        
```ì˜ˆì‹œ : {íŠ¹ì • ê³¼ëª©ì— ëŒ€í•´ í•™ìƒì˜ ì ìˆ˜}ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.```

```
gradeService.java>>

public GradeResponse updateGrade(Long id, GradeForm gradeForm) {

        //í…ŒìŠ¤íŠ¸ ì¡°íšŒ
        Grade grade = gradeRepository.findById(id)
                .orElseThrow(() -> DomainException.notFoundRow(id));
        Student student = studentRepository.findByName(gradeForm.getStudentName())
                .orElseThrow(() -> DomainException.notFoundRow(gradeForm.getStudentName()));
        Subject subject = subjectRepository.findBySubjectType(gradeForm.getSubjectType())
                .orElseThrow(() -> DomainException.notFoundRow(gradeForm.getSubjectName()));

        //í…ŒìŠ¤íŠ¸ê³„ì • ìˆ˜ì •                                          
        Grade updateGrade = Grade.of(student, subject, gradeForm.getScore());

        //í…ŒìŠ¤íŠ¸ê³„ì • ì €ì¥
        gradeRepository.save(updateGrade);
        return new GradeResponse(updateGrade);
    }
```
-> 
```
grade.java>>

public void updateScore(int score) {
    this.score = score;
}

[gradeService.java]

public void updateGrade(Long id, GradeRequest.UpdateGradeForm updateGradeForm) {
    //í…ŒìŠ¤íŠ¸ ì¡°íšŒ
    Grade grade = gradeRepository.findById(id)
            .orElseThrow(() -> DomainException.notFoundRow(id));

    grade.updateScore(updateGradeForm.getScore());

    //gradeRepository.save(grade);
}
```

# 4ï¸âƒ£ ì½”ë“œê°€ ë³€í™”ë  ìˆ˜ ìˆìŒì„ í•­ìƒ ê¸°ì–µí•´ì•¼
- Enumíƒ€ì…ì—ì„œ ìƒìˆ˜ë¼ë¦¬ ì—°ì‚°í•˜ëŠ” ê²½ìš°, @RequiredArgsConstructorê°€ ì•„ë‹Œ ìƒì„±ìë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 
    - `ê°’ì„ ì´í›„ ë³€ê²½í•˜ê²Œ ë˜ë©´` ê¸°ì¡´ ì½”ë“œë¥¼ ì „ë¶€ ì¼ì¼ì´ ìˆ˜ì •í•´ì•¼.

```java
public enum SubjectType {

    KOR("êµ­ì–´", 1,"êµ­ì–´1"), 
    MATH("ìˆ˜í•™", 2, "ìˆ˜í•™2"),
    ENG("ì˜ì–´", 3, "ì˜ì–´3"),
    UNREGISTER("ë¯¸ë“±ë¡", 0, "ë¯¸ë“±ë¡0");

    private final String description;
    private final int value;
    private final String code;

    SubjectType(String description, int value) {
        this.value = value;
        this.description = description;
        this.code = this.name() + value;
    }
}
```